<div class="d-flex justify-content-center align-items-center vh-100" 
     style="background: linear-gradient(135deg, #28104E, #6237A0, #9754CB, #DEACF5);">
  
  <div class="card shadow-lg border-0" style="width: 420px; border-radius: 1rem;">
    
    <!-- Gradient Header -->
    <div class="text-center py-4 rounded-top" 
         style="background: linear-gradient(90deg, #6237A0, #9754CB); border-radius: 1rem 1rem 0 0;">
      <h3 class="fw-bold mb-1 text-white">
        {{ isSignUpMode ? 'Sign Up' : 'Log In' }}
      </h3>
      <p class="small mb-0 text-white-50">
        {{ isSignUpMode ? 'Create your account to start chatting' : 'To get started learning' }}
      </p>
    </div>

    <!-- Card Body -->
    <div class="card-body p-4">
      <form (ngSubmit)="onSubmit()">
        
        <!-- Username -->
        <div class="mb-3">
          <label for="username" class="form-label fw-semibold">Username</label>
          <div class="input-group">
            <span class="input-group-text bg-light"><i class="bi bi-person"></i></span>
            <input
              id="username"
              class="form-control"
              [(ngModel)]="username"
              name="username"
              placeholder="Enter username"
              required
            />
          </div>
        </div>

        <!-- Password -->
        <div class="mb-3">
          <label for="password" class="form-label fw-semibold">Password</label>
          <div class="input-group">
            <span class="input-group-text bg-light"><i class="bi bi-lock"></i></span>
            <input
              id="password"
              type="password"
              class="form-control"
              [class.is-invalid]="errorMessage && !isSignUpMode"
              [(ngModel)]="password"
              name="password"
              placeholder="Enter password"
              (input)="onPasswordInput()"
              required
            />
          </div>
          
          <!-- Password Requirements (Sign Up Only) -->
          @if (isSignUpMode && showRequirements) {
            <div class="mt-2 p-2 bg-light rounded" style="font-size: 0.85rem;">
              <small class="d-block fw-semibold mb-1 text-muted">Password must contain:</small>
              <div class="d-flex align-items-center mb-1">
                <i class="bi" [class.bi-check-circle-fill]="passwordRequirements.minLength" 
                   [class.bi-x-circle-fill]="!passwordRequirements.minLength"
                   [class.text-success]="passwordRequirements.minLength"
                   [class.text-danger]="!passwordRequirements.minLength"></i>
                <span class="ms-2" [class.text-success]="passwordRequirements.minLength">At least 8 characters</span>
              </div>
              <div class="d-flex align-items-center mb-1">
                <i class="bi" [class.bi-check-circle-fill]="passwordRequirements.hasUpperCase" 
                   [class.bi-x-circle-fill]="!passwordRequirements.hasUpperCase"
                   [class.text-success]="passwordRequirements.hasUpperCase"
                   [class.text-danger]="!passwordRequirements.hasUpperCase"></i>
                <span class="ms-2" [class.text-success]="passwordRequirements.hasUpperCase">One uppercase letter (A-Z)</span>
              </div>
              <div class="d-flex align-items-center mb-1">
                <i class="bi" [class.bi-check-circle-fill]="passwordRequirements.hasLowerCase" 
                   [class.bi-x-circle-fill]="!passwordRequirements.hasLowerCase"
                   [class.text-success]="passwordRequirements.hasLowerCase"
                   [class.text-danger]="!passwordRequirements.hasLowerCase"></i>
                <span class="ms-2" [class.text-success]="passwordRequirements.hasLowerCase">One lowercase letter (a-z)</span>
              </div>
              <div class="d-flex align-items-center mb-1">
                <i class="bi" [class.bi-check-circle-fill]="passwordRequirements.hasNumber" 
                   [class.bi-x-circle-fill]="!passwordRequirements.hasNumber"
                   [class.text-success]="passwordRequirements.hasNumber"
                   [class.text-danger]="!passwordRequirements.hasNumber"></i>
                <span class="ms-2" [class.text-success]="passwordRequirements.hasNumber">One number (0-9)</span>
              </div>
              <div class="d-flex align-items-center">
                <i class="bi" [class.bi-check-circle-fill]="passwordRequirements.hasSpecialChar" 
                   [class.bi-x-circle-fill]="!passwordRequirements.hasSpecialChar"
                   [class.text-success]="passwordRequirements.hasSpecialChar"
                   [class.text-danger]="!passwordRequirements.hasSpecialChar"></i>
                <span class="ms-2" [class.text-success]="passwordRequirements.hasSpecialChar">One special character (!@#$%...)</span>
              </div>
            </div>
          }
        </div>

        <!-- Error Message -->
        @if (errorMessage) {
          <div class="alert alert-danger py-2 mb-3" role="alert">
            <i class="bi bi-exclamation-triangle-fill me-2"></i>
            {{ errorMessage }}
          </div>
        }

        <!-- Submit -->
        <button type="submit" 
                class="btn w-100 py-2 fw-semibold shadow-sm text-white"
                style="background: linear-gradient(90deg, #6237A0, #9754CB); border: none;">
          {{ isSignUpMode ? 'Sign Up' : 'Log In' }}
        </button>
      </form>

      <!-- Divider -->
      <div class="text-center my-3">
        <small class="text-muted">or</small>
      </div>

      <!-- Toggle -->
      <div class="text-center">
        <button class="btn w-100" 
                style="border: 1px solid #9754CB; color: #6237A0; border-radius: 0.5rem;"
                (click)="toggleMode()">
          {{ isSignUpMode ? 'Already have an account? Log in' : "Don't have an account? Sign up now!" }}
        </button>
      </div>
    </div>
  </div>
</div>